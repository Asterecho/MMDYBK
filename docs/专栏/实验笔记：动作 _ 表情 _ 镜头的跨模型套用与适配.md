> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [www.bilibili.com](https://www.bilibili.com/read/cv11271866?from=search&spm_id_from=333.337.0.0)

> “套动作” 是 MMD 最吸引人的地方之一，但并不代表着随便拿个 vmd 就能直接用。

“套动作” 是 MMD 最吸引人的地方之一，但并不代表着随便拿个 vmd 就能直接用。套完动作不修，接下来就很有可能带来穿模 / 动作幅度不当 / 物理爆炸 / 镜头错位等一系列后续问题。因此，想认真的做点什么的话，还请先做好在修动作上耗费巨量精力和时间的觉悟。 

这次记些不同模型之间进行动作适配时的总结，很乱，随便看看就好。全专栏分成两部分，第一部分适用于任何 vmd，第二部分适用动捕 / 游戏提取转换来的 vmd，也是自己的兴趣所在。

..... 不过再这么玩下去，哪天这个号突然人间蒸发了我也不会感到意外。

如有雷同，纯属巧合；若有谬误，欢迎斧正。

![](http://i0.hdslb.com/bfs/article/4aa545dccf7de8d4a93c2b2b8e3265ac0a26d216.png)

**通用动作篇：**

Vmdsizing 使用教程

手臂角度调节

骨骼 / 镜头 / 表情关键帧补正

表情映射

次标准骨骼（Semi-Standard Bones）

**动捕 / 游戏动作篇：**  

取消 IK 骨

模型瞬移与物理混乱

30fps→60fps 的逐帧镜头错误

pmm 工程文件的保存、备份和坏档

![](http://i0.hdslb.com/bfs/article/4aa545dccf7de8d4a93c2b2b8e3265ac0a26d216.png)

本专栏唯一无需动脑且操作快捷的方法，非常适合新手使用。

先说最基本的一键调节功能，其他扩展功能会在下面的章节中提到。

地址：

https://bowlroll.net/file/197410（64 位，建议用这个）

https://bowlroll.net/file/197409（32 位，已经停止更新）

![](http://i0.hdslb.com/bfs/article/245d3e9548d3abcd6dbb74785a3034b30095bd15.png@942w_954h_progressive.webp)

对不同模型的手足间距，手臂角度，center 高度等一系列差值的自动调节——虽然不可能修到多好，但至少能大幅度减少肉眼可见的角度错误和穿模，套动作却不知道怎么修的时候不妨先用用这个。  

首页 UI 上四行东西，第一行放 vmd，第二行放原模型，第三行放目标模型，第四行放输出 vmd 地址，按下 “VMD サイジング実行”，完事。

旁边的 “变换前 check” 可以检查目标模型缺了什么骨骼或者表情，也很实用。

虽然模型的 A-pose 大同小异，但 “每个模型的手臂角度不同” 在套动作时也是很容易被忽视的一个因素，上面说到的 vmdsizing 的自动修正中也包括了这点。

![](http://i0.hdslb.com/bfs/article/1bd9cd8e0a57a9be6d048d2f518352b31301dfac.png@942w_942h_progressive.webp)以这张图上的 LAT 式 miku 为例，右手角度为 35 度，左手角度为 45 度

比如模型 A 手臂角度是 45 度，模型 B 的手臂角度是 30 度，进行动作适配的时候必然会有 Z 轴旋转角度上的偏差，虽然第一眼看不出来，但如果碰到要求双手互相接触的动作时，就会因此出现角度错误。

换句话说，要使得动作正确必须要让模型在的默认姿势和动作原模型一致——这也是使用动捕数据的第一步就是在 PE 里把模型调成 T-Pose 的原因。有些贴心的 modeler 会在 readme / 模型说明文里写上手臂角度，或是干脆在建模 / 改模时将手臂设为 30/45 度这种方便调节的角度。

修正法在另一篇专栏提了（见第 2.1 节），PE 里调节好姿势再保存为新 pmx，这里姑且略过：

![](http://i0.hdslb.com/bfs/article/card/2card8713584_web.png)

另一方面，影响动作幅度的不仅仅是 “手臂角度”，还包括了“肩膀角度” 和“手臂长度”等其他因素，不过对这几项也不需要刻意进行修正——虽说一般不会有问题，但如果真因为这两点让动作出了差错，那就不是什么可以轻轻松松修回来的东西了。

这里推荐另一篇讲的更详细的专栏（作者为 @[燕扇](https://space.bilibili.com/2502426)） ，可以同时进行参考：

![](http://i0.hdslb.com/bfs/article/card/2card499061_web.png)

MMD 中的 “编集” 栏里，一共有三种关键帧补正可以选。

这个功能相当常用，尤其是需要逐帧批量修动作的时候：  

![](http://i0.hdslb.com/bfs/article/84779a1ab0e8dc682b8bbd10643567a2d9ec97b8.png@720w_1185h_progressive.webp)

①：镜头（相机）补正  

②：骨骼动作补正

③：表情补正

先从最常用的骨骼补正开始讲起。

在右侧的模型窗口中选中需要修正的骨骼（可以用 box 进行多选），然后在左侧进行关键帧的范围选择：  

![](http://i0.hdslb.com/bfs/article/59215665a3e6dfca73889f522ecd676ce3adbeeb.png@648w_1088h_progressive.webp)

点开②进行手动修正：

![](http://i0.hdslb.com/bfs/article/d4467b375953ec8817cbb83e3eeba8784d7944e1.png@474w_566h_progressive.webp)

第一个框是 “倍率”，第二个框是 “偏移量”，类似于数学中一次函数的 “y=ax+b”，修改后，选择范围内的所有该骨骼的关键帧都会适用同样幅度的补正。

这个功能可以修很多东西：

手臂角度小范围的误差（调节 “左腕 / 右腕” 关键帧的 Z 轴旋转角度数值）

全局的模型位移幅度（调节 center 和 IK 的关键帧的 X 轴位移倍率）

腿部 IK 间距（调节 IK 的 X 轴关键帧位移数值）

腿抬得太高（调节 IK 的 Y 轴关键帧位移倍率）

清空 / 删除某个骨骼在特定轴上的位移 / 旋转（将倍率填成 0）

诸如此类，改起来相当灵活，必要时也可以无视限制对骨骼进行位移方面的修正，哪怕骨骼是圆形的旋转骨。

需要注意的是，只有保存在 PE 的表示栏里的骨骼才能在 MMD 的关键帧栏里被选中：  

![](http://i0.hdslb.com/bfs/article/e18b31637c434f1c4908d165755e3f792a98d1ce.png@857w_822h_progressive.webp)这里用的是自动插件生成的标准表示栏，命名和分组无需固定，自己认得出来就行

如果点了选择却发现没有任何关键帧被选中的话，可以回 PE 查查表示栏是否显示正常，自己改模的时候也经常会忘了这一点，直到套完动作才发现关键帧栏依旧空空荡荡。

接下来是镜头补正，一般用来解决模型身高不同，导致模型无法在镜头内处于中心的问题。

这里**不推荐**用 vmdsizing 中 “カメラ” 栏的修正功能，因为对于位移幅度较大的镜头，自动修起来反而会更糟，还不如自己手动调节后重新注册关键帧。

在相机界面范围选择需要补正的相机帧：

![](http://i0.hdslb.com/bfs/article/231d3b2fa90daff7f44c689aa2bdb87b4e4ddc6a.png@630w_971h_progressive.webp)

然后用按钮①进行手动修正：

![](http://i0.hdslb.com/bfs/article/a429a6d06fce8c69cc98dc3c535092bde17a782d.png@474w_701h_progressive.webp)

修正相机镜头中心的时候也可以用（一般拿来将双人镜头改成单人镜头）

表情同理，在左下角的对话框选择表情后进行范围选择，会标出对应表情的关键帧：

![](http://i0.hdslb.com/bfs/article/94440b9396dd14e6aa1e13d8fd4cf568f0ac0467.png@630w_849h_progressive.webp)

然后就可以用按钮③来修对应表情的幅度倍率了，0 倍 = 删除该表情，甚至可以把表情调成负值：

![](http://i0.hdslb.com/bfs/article/3a7d7712ec849618177d68c8650b64bbb9df2d28.png@474w_213h_progressive.webp)

和骨骼部分一样，表情需要登录到对应表示栏才能进行修改：

![](http://i0.hdslb.com/bfs/article/8b617396e2a5d24c3cb0c1a11ab59a5010300d4d.png@942w_581h_progressive.webp)

题外话，“范围选择”旁边还有一个 “扩大缩小” 按钮，可以用来调节模型相关帧的时间轴速率：

![](http://i0.hdslb.com/bfs/article/e6961d3fba69ed94fbf7dfa5b09c6b732febecfd.png@651w_470h_progressive.webp) ![](http://i0.hdslb.com/bfs/article/b4fc8286a98870d86e8ddfffc3efe01494dbeeb9.png@594w_330h_progressive.webp)

在开始这节之前，先来做一道找茬题：

**对于 “右眼闭合(wink)” 这一标准表情的命名，下列**日文中**哪个是正确的？  
**

①ｳｨﾝｸ2 右

②ｳｨﾝｸ２右

③ｳィﾝｸ2 右

④ｳィﾝｸ２右

⑤ウィンク 2 右

⑥ウィンク２右

⑦ウインク 2 右

⑧ウインク２右

正确答案是⑥——全角片假名，全角数字２，并且中间使用的不是 “イ（i）” 而是小写的“ィ（xi）”，学过罗马音的应该能看得懂。

![](http://i0.hdslb.com/bfs/article/178140c92773a56cf74ea010bbb1818e77a42843.png@309w_111h_progressive.webp)

而提到这一点的原因是：大名鼎鼎的 TDA 式原模 **“Tda 式初音ミク・アペンド Ver1.10”**，不知道为什么，唯独这个表情使用的是**半角**片假名（上面选项中的②）。

![](http://i0.hdslb.com/bfs/article/2277c9dea86924314c32d04fb199da2e170889e4.png@207w_599h_progressive.webp)注意第六行

多米诺效应自此开始。个人见过的一小部分 tda 式模型，以及一些用 tda 模型保存的动作依然保留着这个错误命名，而由于 “ｳｨﾝｸ２右” 和“ウィンク２右”之间全半角的差异，因此无论是 PE 还是 MMD 里都不算同一个表情，使得这类模型载入正常模型导出的表情 vmd 时会出现错误（只载入左眼的部分）。

另外，改模时千万不要手滑把ウィンク打成ウインク，别问我怎么知道的。

这就是动作适配时偶尔要考虑的一件事——表情映射，模型 A 的表情序列如何通过 vmd 文件移到模型 B 的另一个名称不同的表情上？

解决办法有两个：

从模型下手——在 PE 里将模型 B 的对应表情复制一份，然后改名成模型 A 的对应表情，此时模型 B 同时可以兼容 “ｳｨﾝｸ２右” 和“ウィンク２右”两种表情：

![](http://i0.hdslb.com/bfs/article/58f6fe5f380aee363c6d95982d90a1fa5185fe21.png@366w_401h_progressive.webp)

或者从 vmd 文件本身下手——用 vmdsizing 里的 “モーフ” 功能进行映射，而且 GUI 上已经很贴心的标出了各表情的状况：

○vmd、原模型、目标模型都有的表情

●vmd、目标模型有，原模型没有的表情

▲vmd、原模型有，目标模型没有的表情

![](http://i0.hdslb.com/bfs/article/10f5a7731641e7acb0cf37a003ab076cc7edc43c.png@942w_954h_progressive.webp)

本例里，就是原模型的 “ｳｨﾝｸ２右”（▲）映射到新模型的“ウィンク２右” 上：

![](http://i0.hdslb.com/bfs/article/f47263a8d73373e7a8320f1ba748a0bb18a48114.png@891w_150h_progressive.webp)

后面的数字是幅度补正，万一需要的话也可以进行修正，从而省去上一节说过的在 MMD 里调节表情幅度的步骤。

设定完毕后回到主界面，和本文第一节讲的一样点下 “VMD サイジング実行”：

![](http://i0.hdslb.com/bfs/article/8ae132d2d35ca8499ce239da845ed9f9bd0d18b1.png@942w_954h_progressive.webp)

如果动作和表情刚好在一个 VMD 里的话，可以借这个机会一并处理掉。

对于大部分手 K 的动作（vmd）/ 姿势（vpd），会使用诸如 group（グルーブ）或者旋转骨（左腕捩 / 右腕捩）等 **“次标准骨骼（準標準ボーン /Semi-Standard Bone）”**：

![](http://i0.hdslb.com/bfs/article/834e7a2f94cc310faa387f8c5df78d56aa0d2088.png@488w_1118h_progressive.webp)

所以用这类手 K 的动作前，保险起见还是先确认一下模型是否有次标准骨骼，或是提前在 Vmdsizing 里查一遍。如果没有的话，也可以很快的 PE 里用插件加好——添加次标准骨骼的插件之前专栏里也有提过（第 6 节，準標準ボーン追加プラグイン），仅需一键：

![](http://i0.hdslb.com/bfs/article/card/343cddb57a7931ae3c16c19ba70f5c4f6229e86d.png)![](http://i0.hdslb.com/bfs/article/4aa545dccf7de8d4a93c2b2b8e3265ac0a26d216.png)

**欢迎来到地狱。**

**因为是个人兴趣，所以每一条都是自己经历过的惨痛教训，并且部分内容依然处于未解决的状态，如果有人能处理下面提到的问题的话欢迎以任何方式提出建议。**

使用动捕 / 游戏动作前记得关 IK 并且注册好关键帧，或者去 PE 弄个删掉 IK 骨的模型出来再套动作，否则腿部就会永远指向 (0, 0, 0)，第一次使用动捕动作时很容易忘了这点。  

方便起见，也可以分别取消四个 IK 骨骼并注册，然后保存为所有带腿部 IK 的模型都能用得上的 vmd：

![](http://i0.hdslb.com/bfs/article/f7ab350ca236d5a34354a997d95bbc2e1f7af39e.png@317w_198h_progressive.webp)记得点 “登录” ![](http://i0.hdslb.com/bfs/article/c5c132a37e54f03d7ca33f7e5947ef0dd29aa1b0.png@312w_72h_progressive.webp) ![](http://i0.hdslb.com/bfs/article/3f16503eedfa3d68384e07e7686c8df17951afaa.png@192w_51h_progressive.webp)

需要的时候载入这个 vmd，就能省的再点四遍了。

然而关掉 IK 自然会带来中心不稳定 / 腿部抖动等问题，因此在对动作进行提取映射的时候建议将用于位移的 center 骨的 Y 坐标设为 0（和全亲骨一个位置），而不是像一般的 MMD 模型那样把 center/group 放在两腿中间。

另一个可行的方法：将每一帧足部骨骼的坐标逆映射为 IK 骨位于同坐标的关键帧，换句话说，就是 FK 骨逆映射到 IK 骨，方便在 MMD 里进行小幅度修正。

这里介绍另一个插件 “MotionSupporter”：

https://bowlroll.net/file/233713

![](http://i0.hdslb.com/bfs/article/baadadf9670c9827ec7317858307b5aad2642448.png@942w_1035h_progressive.webp)

导入 VMD 和目标模型，在不影响原动作 / 影响较少的情况下生成一个带 IK 骨的新 vmd。

除了添加 IK 帧以外，这个插件还有动作平滑化，自动补间曲线，多段骨骼分割 / 统合等功能，也许可以用于非逐帧动作的改良与修正。  

玩 CGSS/MLTD 的普罗丢瑟们，SIF/SIFAS 的拉 / 水 / 虹人们，或者跑完 URA 看 Live 的训练员们不知是否有注意过，在 MV 中有时模型的位置会随着切镜头瞬间改变——比如几个角色上一个画面还站成前后好几排，切个镜头就突然站在了同一排。  

而在 MMD 中使用这种瞬间移位（一般映射到センター或者グループ骨骼上）的游戏动作，并且尝试连续导出一整段的视频的话——

GIF

![](http://i0.hdslb.com/bfs/article/d3be055b86f3c7149ff3dc8300914f7120c9d517.gif)之前土豆→草菇的《Kawaii make MY day》整段导出的结果

显而易见的物理问题。TIntMe 的三位，真的很抱歉...

**然而，由于 MMD 的机制问题，解决物理的方法似乎只有分段导出视频（因为物理会重新计算）并在其他剪辑软件里进行后期拼接。**

我绝对不会再碰这种有大位移的 CGSS 的动作了。

游戏动作 / 镜头绝大多数都是 60fps（或者至少能以 60fps 进行播放的时间轴序列），由于 MMD 以固定 30fps 进行编辑，因此大部分情况下提取时都会按 30fps 来转换。

然而，从 MMD 导出 60fps 视频的时候问题就来了——逐帧的动作在 60fps 下依然顺滑，而逐帧的镜头会在 60fps 下卡顿。换句话说，以 60fps 导出 “在 30fps 下进行编辑的逐帧镜头” 时会出现镜头抖动（卡一帧动一帧）的致命问题，而动作不会受此影响。

自己直到现在还没想出这个问题的解决方法，目前只有三个临时替代策略：

1. 只导出 30fps 的视频——但说实话，30fps 的观感一般都不太好。

2. 手动简化镜头，删去镜头之间两两切换的多余关键帧，并用补间曲线或者额外关键帧插值代替——试过一次（Arrive You ～それが運命でも～），耗费了巨量的时间精力。为了个人健康着想，除非时间充裕，否则请勿尝试。

3. 以 60fps 进行提取，接着在 MMD 内编辑并导出两倍时长的，以 30fps 播放的 60fps 视频（也就是在 MMD 中以 0.5 倍速进行播放），最后在 PR 里重新加速两倍变回 60fps——下个视频打算试试看，希望能管用。

↑事实证明，管用：

![](http://i0.hdslb.com/bfs/article/card/096c8f74b8c78a6aceac8db301e75e6b980612d3.png)

而付出的代价是：

![](http://i0.hdslb.com/bfs/article/c5c0ddd55ad4b41c1f1418ada55b922d44d14e0b.png@732w_629h_progressive.webp)

1.  两倍的 MMD 内编辑量
    
2.  环境重力要设定成原来的四分之一（9.8→2.45）
    
3.  两倍大小的 pmm 文件和两倍慢的保存时间
    
4.  **需要在没有音乐，或是音乐放慢一半的情况下进行编辑**
    
5.  少量的后期加速 / 剪辑
    

就结果而言，真正的 60fps 动作肯定比以 60fps 导出的 30fps 动作顺眼的多，而第一个实验对象就是自己的担当马娘，爽到。

对于 30fps/60fps 的动捕类动作，关键帧太多显然会导致保存时间过长，而且保存途中 MMD 闪退 / 强制关闭也会高概率导致工程文件（pmm）像游戏那样坏档（加载 pmm 直接闪退）。

注意：从机械硬盘换成固态并不能大幅度降低保存时间，本质还是 MMD 这软件太老了。

换句话说，可能仅仅是因为一个 MME 在保存时的设置错误就会导致 pmm 报废，而如果之前没有进行备份就等于直接白给。

是不是很熟悉？

![](http://i0.hdslb.com/bfs/article/90d02343083c52b51a0b873cfb8717f2c413b6df.png@549w_308h_progressive.webp)*Adobe 元素周期表的尖叫声 *

造成坏档的原因基本有两个：

1. 要读取的帧太多导致 GPU 过载（使用率超过 100%）自动闪退，打游戏时也偶尔会见到，重启下电脑或者清清缓存应该就能正常读了。

2. 被读取的内容出现错误（包括路径不存在，模型本身出错，以及 MME 的 DLL 或者配置文件未能加载等），如果分开单个读取都没问题而 pmm 一读就闪退的话，那就可以宣告坏档了。

为了避免努力全部木大，需要对工程文件进行随时备份。

正常情况下 pmm 里的动作关键帧不会很多，保存速度也很快，一边做一边对**能够正常载入**的 pmm 文件进行备份，炸了直接回档即可。

然而对于高密度关键帧 pmm（尤其在使用动捕动作并需要分段修改时），保存时间较长从而不方便随时存档。因此除了定期备份以外，可以考虑分开进行修改并保存——先修模型 A 的所有动作，然后模型 B，模型 C，镜头，最后是场景打光和 MME。每做完一个阶段就将对应的关键帧保存为 vmd，如果坏档了也可以快速从 0 开始还原，虽然载入也会花掉不少时间，但肯定比读取概率坏档的 pmm 文件舒服得多。

![](http://i0.hdslb.com/bfs/article/4aa545dccf7de8d4a93c2b2b8e3265ac0a26d216.png)

*   从痛苦的动作修正过程中可以看出，动作本身的生产（动捕、用软件对视频进行 trace，或者从零开始 K 帧）包含了巨大的工作量，更别说前两项需要进行降噪处理，第三项需要加入补间曲线以提升流畅度。因此，向产出这些动作数据的作者 / 工作室致以最高的敬意。
    
*   想看桃子马儿跳。
    
*   要不是最后解决了 CGSS 动作的抖动问题，恐怕桃子已经被拉去马儿跳了。
    

以上。

虽然修动作基本依赖于个人感觉和经验积累，但还是希望这篇玩意有幸能帮上谁的忙。